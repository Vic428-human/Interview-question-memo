

```

// Assuming this is defined elsewhere in your codebase
declare const codeDict: Record<string, string>;

export const extractDisplayUnitFromUID = async (uid: string) => {
  const [sourceContextId, categoryKey, itemVisualId] = decodeReferenceUID(uid);

//STATIC_VIEW = codeDict[categoryKey]
  const logicBranchKey = codeDict[categoryKey];

  if (logicBranchKey === 'SKIP_PROCESSING') return undefined;

  const logicToViewModeMap = {
    STATIC_VIEW: 'static_mode',
    INTERACTIVE_VIEW: 'interactive_mode',
    CUSTOM_VIEW: 'custom_mode',
  } as const;

  // 可以根據 logicBranchKey 決定顯示模式
  const other = logicToViewModeMap[logicBranchKey];
};

const response = await fetch(`/api/odds/${marketCode}?${queryParams}`, {
  headers: {
    'Authorization': 'Bearer your_token_here',
    'Content-Type': 'application/json'
  }
});
```

```
/**
 * 將複合 UID 拆解為內部結構
 * 範例 UID: "ctx123-cat45-item789"
 */
export function decodeReferenceUID(uid: string): [string, string, string] {
  const segments = uid.split('-');

  if (segments.length !== 3) {
    throw new Error(`Invalid UID format: "${uid}"`);
  }

  const [sourceContextId, categoryKey, itemVisualId] = segments;

  return [sourceContextId, categoryKey, itemVisualId];
}
```

```
const codeDict: Record<string, LogicBranchKey> = {
  CAT01: 'STATIC_VIEW',
  CAT02: 'INTERACTIVE_VIEW',
  CAT03: 'CUSTOM_VIEW',
  CAT99: 'SKIP_PROCESSING',
};
```

註：
- [as const用法](https://github.com/Vic428-human/Interview-question-memo/blob/main/Typescript/%E5%9F%BA%E7%A4%8E/as-const.md)

