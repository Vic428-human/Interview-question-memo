

```
export const extractDisplayUnitFromUID = async (uid: string) => {
  const [sourceContextId, categoryKey, itemVisualId] = decodeReferenceUID(uid);

  const logicBranchKey = codeDict[categoryKey];

  if (logicBranchKey === 'SKIP_PROCESSING') return undefined;

  const logicToViewModeMap = {
    STATIC_VIEW: 'static_mode',
    INTERACTIVE_VIEW: 'interactive_mode',
    CUSTOM_VIEW: 'custom_mode',
  } as const;

  // 可以根據 logicBranchKey 決定顯示模式
};
```

```
/**
 * 將複合 UID 拆解為內部結構
 * 範例 UID: "ctx123-cat45-item789"
 */
export function decodeReferenceUID(uid: string): [string, string, string] {
  const segments = uid.split('-');

  if (segments.length !== 3) {
    throw new Error(`Invalid UID format: "${uid}"`);
  }

  const [sourceContextId, categoryKey, itemVisualId] = segments;

  return [sourceContextId, categoryKey, itemVisualId];
}
```
